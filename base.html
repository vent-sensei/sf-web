{% load staticfiles %}
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<!-- Tell the browser to be responsive to screen width -->
		<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
		<meta name="description" content="The authentication service for Krypted Gaming. This allows us to link in-game characters to our Discord, forum, and other user accounts.">
		<meta http-equiv="content-type" content="text/html;charset=UTF-8">
		<title>{{SITE_TITLE}}</title>

		<link rel="stylesheet" href="{% static 'global/ui/bower_components/bootstrap/dist/css/bootstrap.min.css' %}">
		<!-- Font Awesome -->
		<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
		<link rel="stylesheet" href="{% static 'global/ui/bower_components/font-awesome/css/font-awesome.min.css' %}">
		<!-- Ionicons -->
		<link rel="stylesheet" href="{% static 'global/ui/bower_components/Ionicons/css/ionicons.min.css' %}">
		<!-- Theme style -->
		<!-- AdminLTE Skins. We have chosen the skin-blue for this starter
					page. However, you can choose any other skin. Make sure you
					apply the skin class to the body tag so the changes take effect. -->
		<link rel="stylesheet" href="{% static 'global/ui/dist/css/skins/skin-blue.min.css' %}">
		<link rel="shortcut icon" type="image/png" href="{{SITE_LOGO}}"/>

		<link rel="stylesheet" href="/staticfiles/global/css/base.css"/>

		<!-- REQUIRED JS SCRIPTS -->

		<!-- jQuery 3 -->
		<script src="/static/global/ui/bower_components/jquery/dist/jquery.min.js"></script>
		<!-- Bootstrap 3.3.7 -->
		<script src="/static/global/ui/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
		<!-- AdminLTE App -->
		<script src="/static/global/ui/dist/js/adminlte.min.js"></script>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.10/js/select2.min.js"></script>
		<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.10/css/select2.min.css" rel="stylesheet" />

		<script src="/static/global/ui/bower_components/moment/moment.js"></script>

		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.css" />
		<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js"></script>
		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
		<link href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css" rel="stylesheet" type="text/css">
		<!-- Google Font -->
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
		{% if GOOGLE_ANALYTICS_CODE %}
		<!-- Google Analytics -->

		<script async src="https://www.googletagmanager.com/gtag/js?id={{GOOGLE_ANALYTICS_CODE}}"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag(){ dataLayer.push(arguments); }
			gtag('js', new Date());
			gtag('config', '{{GOOGLE_ANALYTICS_CODE}}');
		</script>
		{% endif %}
		{% block includes %}
		{% endblock %}
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
		<script>
			function odd_even(i) {
				if (i % 2 == 0)
					return "odd"
				else
					return "even"
			}

			$( document ).ready(function() {
					$.getJSON( "/engagement/events/api", function( data ) {
							$("#fleets").empty()
							for (i = 0; i < data.length; i++) {
								$("#fleets").append("<div id='fleetid"+i+"' class='"+odd_even(i)+" table-line'><div class='type' style='display:inline-block'><img stc='/static/spectre/"+data[i].fleettype+"'></div><div class='datetd' style='display:inline-block'>"+data[i].start_datetime.split('T')[0]+"</div><div class='time' style='display:inline-block'>"+data[i].start_datetime.split('T')[1].substring(0,5)+"</div><div class='Fc' style='display:inline-block'>"+data[i].fleetcommander+"</div><div class='formup' style='display:inline-block'>"+data[i].formup+"</div><div class='doctrine' style='display:inline-block'><a href='#'  onclick='loaddoctrine("+data[i].doctrine_id+")'>"+data[i].doctrine+"</a></div><div class='title' style='display:inline-block'>"+data[i].name+"</div></div>")
							}
					})
			})

			function loaddoctrine(doctrineId) {
				$("#fleets-container").hide()
				$("#doctrine-fleet").show()
				$.getJSON( "doctrine/fit/api/"+doctrineId, function( data ) {
					for (i = 0; i < data.length; i++){
						$("#doctrine-list-ships").append("<div id='shipid"+i+"' style='height:40px' class='"+odd_even(i)+" table-line'><div style='width:10%;display:inline-block;float:left'><img src='https://imageserver.eveonline.com/Type/"+data[i].EFTparsed.ship[0]+"_32.png'></div><div style='width:90%;display:inline-block'><a href='#' onclick=loadEFT("+i+")>"+data[i].name+"</a></div><div id='EFT'style='display:none'>"+data[i].EFT+"</div></div>")
					}
				})
			}

			function loadEFT(line) {
				$("#EFT_Text").children('textarea').text($("#shipid"+line).children("#EFT").text())
				$("#EFT_Text").show();

			}
		</script>
		<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
	</head>

	<body>
		<div class=".nav" style="background-color:rgb(15,15,15);margin:0px;vertical-align:middle;height:62px">
			<center>
				<div class=".menu">
					<a href="/"><img src="/static/spectre/wordmark_white.png" style="display:inline;"></img></a>
					<ul class="sidebar-menu" data-widget="tree">
						{% block sidebar %}
						{% endblock %}
					</ul>
				</div>
			</center>
		</div>
		<div style="background-color:#62176f;height:3px;width:100%"></div>
		<div style="margin:10%;margin-top:10px;margin-bottom:0px;background-color:#62176f;height:30px;color:#cccccc;text-transform:uppercase;padding-left:10px" id="title" >
			Upcoming fleets
		</div>
		<div id="content" style="margin:10%;margin-top:0px;background-color:rgb(15,15,15);padding-top:12px;padding-left:10px;padding-right:10px;color:rgb(204,204,204);padding-bottom:10px;min-height:400px;" >
			{% if messages %}
			{% for message in messages %}
		</div>
		<div class="alert
			{% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %} alert-danger {% endif %}
			{% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %} alert-success {% endif %}
			{% if message.level == DEFAULT_MESSAGE_LEVELS.WARNING %} alert-warning {% endif %}
			{% if message.level == DEFAULT_MESSAGE_LEVELS.INFO %} alert-info {% endif %}
			alert-dismissible"
		>
			<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
			{{message}}
		</div>
		{% endfor %}
		{% endif %}
		{% block content %}
		{% endblock %}	

		{% block scripts %}
		{% endblock %}
	</body>
</html>

